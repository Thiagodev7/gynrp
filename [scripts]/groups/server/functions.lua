-----------------------------------------------------------------------------------------------------------------------------------------
-- VRP
-----------------------------------------------------------------------------------------------------------------------------------------
local Tunnel = module("vrp","lib/Tunnel")
local Proxy  = module("vrp","lib/Proxy")
local Tools  = module("vrp","lib/Tools")
vRP = Proxy.getInterface("vRP")
vRPclient = Tunnel.getInterface("vRP")
-----------------------------------------------------------------------------------------------------------------------------------------
-- database set
-----------------------------------------------------------------------------------------------------------------------------------------
DB = {}

DB.prepare = function(name, query)
    vRP.prepare(name, query)
end

DB.execute = function(name, param)
    return vRP.execute(name, param)
end

DB.query = function(name, param)
    return vRP.query(name, param)
end
-----------------------------------------------------------------------------------------------------------------------------------------
-- getUserSource
-----------------------------------------------------------------------------------------------------------------------------------------
getUserSource = function(user_id)
    return vRP.getUserSource(tonumber(user_id))
end
-----------------------------------------------------------------------------------------------------------------------------------------
-- getUserId
-----------------------------------------------------------------------------------------------------------------------------------------
getUserId = function(source)
    return vRP.getUserId(source)
end
-----------------------------------------------------------------------------------------------------------------------------------------
-- getUserIdentity
-----------------------------------------------------------------------------------------------------------------------------------------
getUserIdentity = function(user_id)
    return vRP.getUserIdentity(user_id)
end
-----------------------------------------------------------------------------------------------------------------------------------------
-- getUserFullName
-----------------------------------------------------------------------------------------------------------------------------------------
getUserFullName = function(user_id)
    local identity = getUserIdentity(user_id)
    local name = identity.name.." "..identity.firstname
    return name
end
-----------------------------------------------------------------------------------------------------------------------------------------
-- getUserImage
-----------------------------------------------------------------------------------------------------------------------------------------
getUserImage = function(user_id)
    local identity = getUserIdentity(user_id)
    local image = identity.foto
    return image
end
-----------------------------------------------------------------------------------------------------------------------------------------
-- getHasPermission
-----------------------------------------------------------------------------------------------------------------------------------------
getHasPermission = function(user_id, perm)
    return vRP.hasPermission(user_id,perm)
end
-----------------------------------------------------------------------------------------------------------------------------------------
-- getHasPermission
-----------------------------------------------------------------------------------------------------------------------------------------
getUserGroups = function(user_id)
    return vRP.getUserGroups(user_id)
end
-----------------------------------------------------------------------------------------------------------------------------------------
-- checkHasGroup
-----------------------------------------------------------------------------------------------------------------------------------------
checkHasGroup = function(user_id, group)
    return vRP.hasGroup(user_id,group)
end
-----------------------------------------------------------------------------------------------------------------------------------------
-- getGroupTitle
-----------------------------------------------------------------------------------------------------------------------------------------
getGroupTitle = function(group)
    return vRP.getGroupTitle(group)
end
-----------------------------------------------------------------------------------------------------------------------------------------
-- getGroupTitle
-----------------------------------------------------------------------------------------------------------------------------------------
addUserGroup = function(user_id, group)
    return vRP.addUserGroup(user_id, group)
end
-----------------------------------------------------------------------------------------------------------------------------------------
-- getGroupTitle
-----------------------------------------------------------------------------------------------------------------------------------------
remUserGroup = function(user_id, group)
    return vRP.removeUserGroup(user_id, group)
end
-----------------------------------------------------------------------------------------------------------------------------------------
-- requestAcceptorNot
-----------------------------------------------------------------------------------------------------------------------------------------
requestAcceptorNot = function(source,title,timeout)
    return vRP.request(source,title,timeout)
end
-----------------------------------------------------------------------------------------------------------------------------------------
-- getBankMoney
-----------------------------------------------------------------------------------------------------------------------------------------
getBankMoney = function(user_id)
    return vRP.getBankMoney(user_id)
end
-----------------------------------------------------------------------------------------------------------------------------------------
-- addBankMoney
-----------------------------------------------------------------------------------------------------------------------------------------
addBankMoney = function(user_id, amount)
    local bank  = getBankMoney(user_id)
    local total = bank + amount
    vRP.setBankMoney(user_id, tonumber(total))
end
-----------------------------------------------------------------------------------------------------------------------------------------
-- remBankMoney
-----------------------------------------------------------------------------------------------------------------------------------------
remBankMoney = function(user_id, amount)
    local bank  = getBankMoney(user_id)
    local total = bank - amount
    vRP.setBankMoney(user_id, tonumber(total))
end
-----------------------------------------------------------------------------------------------------------------------------------------
-- getItemName
-----------------------------------------------------------------------------------------------------------------------------------------
getItemName = function(item)
    return vRP.itemNameList(item)
end
-----------------------------------------------------------------------------------------------------------------------------------------
-- getUserData
-----------------------------------------------------------------------------------------------------------------------------------------
getUserData = function(user_id, key)
    return vRP.getUData(user_id, key)
end
-----------------------------------------------------------------------------------------------------------------------------------------
-- setUserData
-----------------------------------------------------------------------------------------------------------------------------------------
setUserData = function(user_id, key, data)
    vRP.setUData(user_id, key, data)
end
-----------------------------------------------------------------------------------------------------------------------------------------
-- getUserData
-----------------------------------------------------------------------------------------------------------------------------------------
getServerData = function(key)
    return vRP.getSData(key)
end
-----------------------------------------------------------------------------------------------------------------------------------------
-- setServerData
-----------------------------------------------------------------------------------------------------------------------------------------
setServerData = function(key, data)
    vRP.setSData(key, data)
end
-----------------------------------------------------------------------------------------------------------------------------------------
-- sendnotify
-----------------------------------------------------------------------------------------------------------------------------------------
sendnotify = function(source, type, message, time)
    if time == nil then
        time = 5000
    end
    if source then 
        TriggerClientEvent("Notify",source,type,message,time)
    end
end
-----------------------------------------------------------------------------------------------------------------------------------------
-- sendwebhook
-----------------------------------------------------------------------------------------------------------------------------------------
sendwebhook = function(webhook,data)
    if webhook ~= nil and webhook ~= "" then
		PerformHttpRequest(webhook, function(err, text, headers) end, 'POST', json.encode({
			embeds = data
		}), { ['Content-Type'] = 'application/json' })
	end
end
-----------------------------------------------------------------------------------------------------------------------------------------
-- numberToInt
-----------------------------------------------------------------------------------------------------------------------------------------
function numberToInt(v)
	local n = tonumber(v)
	if n == nil then 
		return 0
	else
		return math.floor(n)
	end
end